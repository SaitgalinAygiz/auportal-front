import React, {useContext, useEffect} from 'react'
import {modalContext} from 'contexts/modalContext'
import useFetch from 'hooks/useFetch'
import Loading from 'components/loading'
import EmailConfirm from './emailConfirm'

const RegistrationRules = () => {
    const RegistrationRulesConfirmUrl = '/auth/confirmRules'
    const [{result, isLoading, error}, doFetch] = useFetch(RegistrationRulesConfirmUrl)

    let {modalContent, handleModal, modal} = useContext(modalContext)

    const closeModal = event => {
        event.preventDefault()
        handleModal()
    }

    const handleSubmit = event => {
        event.preventDefault()
        const regAgreeEl = document.getElementById('registrationRulesAgree')
        if (regAgreeEl.checked === false) {
            alert('Пожалуйста подтвердите согласие с правилами портала')
        }

        doFetch({
            method: 'post'
        })

        handleModal(<EmailConfirm/>, true)
    }



    return (
        <div className="modal modal_poly modal_avtozap_css">
            <div className="modal_bg"/>
            <div className="modal_box">
                <img onClick={closeModal} className="close mod_close" src="/img/close.svg" alt={"close"} />
                    <h2>Условия и правила регистрации на портале <img src="/img/logo_min.svg" alt={"BestForCars"}/></h2>
                    <div className="modal_poly_text">
                        <h3>Заголовок</h3>
                        <br/>
                        <p>Прародителем текста-рыбы является известный "Lorem Ipsum" – латинский текст, ноги которого
                            растут аж из 45 годадо нашей эры. Сервисов по созданию случайного текста на основе Lorem
                            Ipsum великое множество, однако все они имеют один существенный недостаток: их "рыба текст"
                            подходит лишь для англоязычных ресурсов/проектов. Мы же, фактически, предлагаем Lorem Ipsum
                            на русском языке – вы можете использовать полученный здесь контент абсолютно бесплатно и в
                            любых целях, не запрещённых законодательством.</p>
                        <br/>

                        <p>Прародителем текста-рыбы является известный "Lorem Ipsum" – латинский текст, ноги которого
                            растут аж из 45 годадо нашей эры. Сервисов по созданию случайного текста на основе Lorem
                            Ipsum великое множество, однако все они имеют один существенный недостаток: их "рыба текст"
                            подходит лишь для англоязычных ресурсов/проектов. Мы же, фактически, предлагаем Lorem Ipsum
                            на русском языке – вы можете использовать полученный здесь контент абсолютно бесплатно и в
                            любых целях, не запрещённых законодательством.</p>
                        <br/>

                        <p>Прародителем текста-рыбы является известный "Lorem Ipsum" – латинский текст, ноги которого
                            растут аж из 45 годадо нашей эры. Сервисов по созданию случайного текста на основе Lorem
                            Ipsum великое множество, однако все они имеют один существенный недостаток: их "рыба текст"
                            подходит лишь для англоязычных ресурсов/проектов. Мы же, фактически, предлагаем Lorem Ipsum
                            на русском языке – вы можете использовать полученный здесь контент абсолютно бесплатно и в
                            любых целях, не запрещённых законодательством.</p>
                        <br/>
                        <p>Прародителем текста-рыбы является известный "Lorem Ipsum" – латинский текст, ноги которого
                            растут аж из 45 годадо нашей эры. Сервисов по созданию случайного текста на основе Lorem
                            Ipsum великое множество, однако все они имеют один существенный недостаток: их "рыба текст"
                            подходит лишь для англоязычных ресурсов/проектов. Мы же, фактически, предлагаем Lorem Ipsum
                            на русском языке – вы можете использовать полученный здесь контент абсолютно бесплатно и в
                            любых целях, не запрещённых законодательством.</p>
                        <br/>
                        <p>Прародителем текста-рыбы является известный "Lorem Ipsum" – латинский текст, ноги которого
                            растут аж из 45 годадо нашей эры. Сервисов по созданию случайного текста на основе Lorem
                            Ipsum великое множество, однако все они имеют один существенный недостаток: их "рыба текст"
                            подходит лишь для англоязычных ресурсов/проектов. Мы же, фактически, предлагаем Lorem Ipsum
                            на русском языке – вы можете использовать полученный здесь контент абсолютно бесплатно и в
                            любых целях, не запрещённых законодательством.</p>
                        <br/>
                        <p>Прародителем текста-рыбы является известный "Lorem Ipsum" – латинский текст, ноги которого
                            растут аж из 45 годадо нашей эры. Сервисов по созданию случайного текста на основе Lorem
                            Ipsum великое множество, однако все они имеют один существенный недостаток: их "рыба текст"
                            подходит лишь для англоязычных ресурсов/проектов. Мы же, фактически, предлагаем Lorem Ipsum
                            на русском языке – вы можете использовать полученный здесь контент абсолютно бесплатно и в
                            любых целях, не запрещённых законодательством.</p>
                        <br/>
                        <p>Прародителем текста-рыбы является известный "Lorem Ipsum" – латинский текст, ноги которого
                            растут аж из 45 годадо нашей эры. Сервисов по созданию случайного текста на основе Lorem
                            Ipsum великое множество, однако все они имеют один существенный недостаток: их "рыба текст"
                            подходит лишь для англоязычных ресурсов/проектов. Мы же, фактически, предлагаем Lorem Ipsum
                            на русском языке – вы можете использовать полученный здесь контент абсолютно бесплатно и в
                            любых целях, не запрещённых законодательством.</p>
                        <br/>
                    </div>
                    <label>
                        <input type="checkbox" required={true} id="registrationRulesAgree" />
                        <div>Я ознакомился (-ась) с условиями регистрации на сайте и обязуюсь их соблюдать</div>
                    </label>
                    <div className="modal_poly_buts">
                        <a onClick={closeModal} className="close">Отмена</a>
                        {isLoading && (
                            <Loading/>
                        )}
                        <a onClick={handleSubmit} className="modal_poly_reg">Зарегистрироваться</a>
                    </div>
            </div>
        </div>
    )
}

export default RegistrationRules
